---
layout: post
title: "Leetcode:142. 环形链表 II"
subtitle: ""
date: 2025-09-13
author: "Can"
header-img: "img/landscape.jpg"
tags: ["Leetcode", "Linked-List", "Two-Pointers Algorithm", "Medium", "C++"]
---

Leetcode题目链接：[142. 环形链表 II](https://leetcode.cn/problems/linked-list-cycle-ii/description/)

## Problem Description
给定一个链表的头节点`head`，返回链表开始入环的第一个节点。 如果链表无环，则返回 `null`。

如果链表中有某个节点，可以通过连续跟踪 `next` 指针再次到达，则链表中存在环。 为了表示给定链表中的环，评测系统内部使用整数 `pos` 来表示链表尾连接到链表中的位置（索引从 0 开始）。如果 `pos` 是 `-1`，则在该链表中没有环。注意：`pos` 不作为参数进行传递，仅仅是为了标识链表的实际情况。

**不允许修改链表。**

## Case
<img src="/img/leetcode/142-1.png" alt="142-1" style="zoom:50%;" />

## Solution
**快慢指针**   [具体数学原理](https://programmercarl.com/0142.%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8II.html#%E6%80%9D%E8%B7%AF)
1. 定义指针
    * 定义fast指针作为快指针，定义slow指针作为慢指针，快慢指针初始均指向head头节点
    * 定义index1指针用于指向快慢指针初次相遇的位置，初始置为空
    * 定义index2指针用于指向链表的头节点，初始置为空
2. 指针后移
    * 执行外层while循环，判定条件为fast指针不为空且fast指针的下一个位置也不为空（原因是fast指针每次需要向后移动两个位置）
        * fast向后移动两个位置，即fast = fast->next->next
        * slow向后移动一个位置，即slow = slow->next
    * 当快慢指针相遇时，记录当前的相遇位置为index1，同时将index2指向链表头节点
    * 执行内层while循环，判定条件为index1 != index2（原因是index1和index2同时向后移动，当二者相遇时即找到了链表开始入环的第一个节点）
        * index1向后移动一个位置，即index1 = index1->next
        * index2向后移动一个位置，即index2 = index2->next
        * 当二者相遇时，环的入口被找到，此时返回index1或index2均可（此时index1与index2指向相同的位置）
3. 若链表不存在环则返回NULL

## Code
```cpp
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode(int x) : val(x), next(NULL) {}
 * };
 */
class Solution {
public:
    ListNode *detectCycle(ListNode *head) {
        //定义指针
        ListNode *fast = head, *slow = head;
        ListNode *index1 = nullptr, *index2 = nullptr;
        //指针后移
        while(fast != NULL && fast->next != nullptr) {
            fast = fast->next->next;
            slow = slow->next;
            if(fast == slow) {
                index1 = slow;
                index2 = head;
                while(index1 != index2) {
                    index1 = index1->next;
                    index2 = index2->next;
                }
                return index1;
            }
        }
        //链表无环则返回null
        return NULL;
    }
};
```

## Result
![result](/img/leetcode/142.png)
